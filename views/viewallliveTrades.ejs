<%- include('partials/header') %>

<div class="container text-white" style="min-height: 100vh; background-color: #212529;">
  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Trade ID: <%= livetrade._id %></h1>
    <div class="text-end">
      <small><b>Owner:</b> <%= livetrade.owner ? livetrade.owner.fullname : 'Unknown' %></small><br>
      <small><b>Last Updated:</b> <%= new Date(livetrade.updatedAt).toLocaleString() %></small>
    </div>
  </div>

  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb bg-dark text-white">
      <li class="breadcrumb-item"><a href="/adminRoute" class="text-white">Dashboard</a></li>
      <li class="breadcrumb-item"><a href="/all-livetrade" class="text-white">All Trades</a></li>
      <li class="breadcrumb-item active text-white" aria-current="page">Trade ID: <%= livetrade._id %></li>
    </ol>
  </nav>

  <!-- Trade Details -->
  <div class="row">
    <div class="col-md-6">
      <div class="card bg-dark text-white mb-3">
        <div class="card-header">Trade Information</div>
        <ul class="list-group list-group-flush bg-dark">
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Trade ID:</b></div>
              <div class="col-8"><%= livetrade._id %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Currency Pair:</b></div>
              <div class="col-8"><%= livetrade.currencypair %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Type:</b></div>
              <div class="col-8"><%= livetrade.type %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Action:</b></div>
              <div class="col-8"><%= livetrade.action %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Lot Size:</b></div>
              <div class="col-8"><%= livetrade.lotsize.toFixed(4) %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Entry Price:</b></div>
              <div class="col-8">$<%= livetrade.entryPrice.toFixed(2) %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Stop Loss:</b></div>
              <div class="col-8">$<%= livetrade.stopLoss.toFixed(2) %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Take Profit:</b></div>
              <div class="col-8">$<%= livetrade.takeProfit.toFixed(2) %></div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card bg-dark text-white mb-3">
        <div class="card-header">Trade Parameters</div>
        <ul class="list-group list-group-flush bg-dark">
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Leverage:</b></div>
              <div class="col-8"><%= livetrade.leverage %>x</div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Status:</b></div>
              <div class="col-8">
                <span class="status-<%= livetrade.status %>">
                  <%= livetrade.status.charAt(0).toUpperCase() + livetrade.status.slice(1) %>
                </span>
              </div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Profit/Loss:</b></div>
              <div class="col-8 <%= livetrade.profitLoss >= 0 ? 'text-success' : 'text-danger' %>">
                $<%= livetrade.profitLoss.toFixed(2) %>
              </div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Amount:</b></div>
              <div class="col-8">$<%= livetrade.amount.toFixed(2) %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Owner:</b></div>
              <div class="col-8">
                <%= livetrade.owner ? `${livetrade.owner.fullname} (${livetrade.owner.email})` : 'Unknown' %>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="card bg-dark text-white mb-3">
        <div class="card-header">Timestamps</div>
        <ul class="list-group list-group-flush bg-dark">
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Created At:</b></div>
              <div class="col-8"><%= new Date(livetrade.createdAt).toLocaleString() %></div>
            </div>
          </li>
          <li class="list-group-item bg-dark text-white">
            <div class="row">
              <div class="col-4"><b>Updated At:</b></div>
              <div class="col-8"><%= new Date(livetrade.updatedAt).toLocaleString() %></div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Back Button -->
  <div class="row">
    <div class="col-12">
      <a href="/all-livetrade" class="btn btn-primary">Back to All Trades</a>
    </div>
  </div>
</div>

<style>
  .status-open {
    color: #28a745;
    font-weight: bold;
  }
  .status-closed {
    color: #dc3545;
    font-weight: bold;
  }
  .text-success {
    color: #28a745 !important;
  }
  .text-danger {
    color: #dc3545 !important;
  }
  .card-header {
    background-color: #343a40;
  }
  .breadcrumb {
    background-color: #343a40;
  }
</style>

<%- include('partials/footer') %>